//we want to give this new campaign a good chance of success
//so we are setting all the new keywords at top of page cpc
//that way they will have a chance to show their performance

function main() {
  var keywordsIterator = AdWordsApp.keywords()
      .orderBy("TopOfPageCpc DESC")
      .withCondition("CampaignStatus = ENABLED")
      .withCondition("AdGroupStatus = ENABLED")
      .withCondition("LabelNames CONTAINS ['brand-keyword']")
      .withCondition("Status = ACTIVE")
      .get();
  
  
  //iterate through keyword selector to decide if there are keywords with max cpc < top of page cpc
  while(keywordsIterator.hasNext()){
    var keyword = keywordsIterator.next();
	//store current value of keyword max cpc
    var currentMaxCpc = keyword.getMaxCpc();
	//store current value of TopofPageCpc
	var currentTopOfPageCpc = keyword.getTopOfPageCpc();
    // check to see if current max cpc is < Top of Page Cpc
    if (currentMaxCpc < currentTopOfPageCpc){
      //if true log keyword to console and change it's bid to top of page cpc
	  Logger.log('we have a keyword where the bid is below top of page cpc: ' + keyword.getCampaign()+','+ keyword.getAdGroup()+ ","+ keyword.getText());
      // and set the bid to TopOfPageCpc* 5%
      keyword.setMaxCpc(currentTopOfPageCpc*1.05);
      // log the changes to the console.
      Logger.log(' bid was changed' + 'from: ' + currentMaxCpc + ' to: ' + currentTopOfPageCpc);
    }
    
  }

}